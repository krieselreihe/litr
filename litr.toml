[commands]

[commands.update]
script = "git pull && git submodule update --init"
description = "Update all current submodules to the defined targets.\nTargets are defined in .gitmodules"

[commands.build]
script = [
  """cmake -GNinja %{trace '-DDISASSEMBLE=ON -DTRACE=ON'} \
  -DCMAKE_BUILD_TYPE=%{target} \
  -B build/%{target}""",
  "ninja -C build/%{target}"
]
description = "Build the application for a given traget."

[commands.test]
script = "cd build/%{target}/src/tests && ctest && cd ../../../.."
description = "Run all unit tests defined under src/tests"

[commands.release.brew]
script = "./scripts/release.sh"
description = "Build a production release for Homebrew on MacOS."

[params.target]
shortcut = "t"
description = "Define the application build target."
type = ["debug", "release", "profile", "trace"]
default = "debug"

[params.trace]
shortcut = "r"
description = "Activate tracing support."
type = "boolean"
